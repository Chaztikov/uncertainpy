services: docker
language: python
python:
  # We don't actually use the Travis Python, but this keeps it organized.
  # - "3.5"
  - "2.7"
install:
  - source libs/travis-conda-scripts/scripts/config.sh
  - bash -ex libs/travis-conda-scripts/scripts/travis_install.sh
before_script:
  - docker build -t uncertainpy -f .docker/Dockerfile_python2 .docker
  - pip install coverage
script:
  - docker run -v $(pwd):/home/docker/uncertainpy -t uncertainpy /bin/bash uncertainpy/.travis/travis.sh
  # - coverage run --source uncertainpy -m py.test -s
  # - coverage report
  # - source libs/travis-conda-scripts/scripts/config.sh
  # - bash -ex libs/travis-conda-scripts/scripts/build.sh
# deploy:
#   - provider: script
#     skip_cleanup: true
#     script: bash -ex libs/travis-conda-scripts/scripts/upload.sh cinpla main
#     on:
#       tags: true
#   - provider: script
#     skip_cleanup: true
#     script: bash -ex libs/travis-conda-scripts/scripts/upload.sh cinpla dev
#     on:
#       branch: dev